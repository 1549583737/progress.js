/*! Pseudo progress v1.1.4 | @author baijunjie | https://github.com/baijunjie/progress.js */
!function(t,i){"use strict";"function"==typeof define&&define.amd?define(i):"object"==typeof exports?module.exports=i():(t.bjj=t.bjj||{},t.bjj.progress=i())}(this,function(t){"use strict";function i(){if(this._requestAnimationFrame=h,!this._requestAnimationFrame){var t=0;this._requestAnimationFrame=function(i){var e=(new Date).getTime(),s=Math.max(0,16-(e-t)),n=window.setTimeout(function(){i(e+s)},s);return t=e+s,n}}this._runFunc=[],this._active=!!this._runFunc.length,this._isRun=!0,this._timerID=0,this._loopCallback=e(this._loopCallback,this)}function e(t,i){if("string"==typeof i){var e=t[i];i=t,t=e}if("function"!=typeof t)return void 0;var s=Array.prototype.slice,n=s.call(arguments,2),o=function(){return t.apply(i||this,n.concat(s.call(arguments)))};return o.guid=t.guid=t.guid||u++,o}function s(t){if(t in d.style)return t;for(var i=t.charAt(0).toUpperCase()+t.substr(1),e=["Webkit","Moz","ms","O"],s=0,n=e.length;n>s;s++){var o=e[s]+i;if(o in d.style)return o}}function n(){return d.style[c.transform]="",d.style[c.transform]="rotateY(90deg)",""!==d.style[c.transform]}function o(s){this._hideDuration=400,this._coeStep1=.1,this._coeStep2=.01,this._coeStep3=.3,this._coeStep4=.1,this._valueStep1=20,this._valueStep2=95,this._valueStep3=100,this._valueStep4=0,this._value=0,this._targetValue=100,this._coe=1,this._isRun=!1,this._isShow=!1,this._timerID=0,this._loop=new i,this._init(),this.color(s||"#2299dd"),this._loadedHandle=e(this._loadedHandle,this),"complete"===document.readyState||t||(this.start(),this._addLoadEvent())}for(var h=window.requestAnimationFrame,r=window.cancelAnimationFrame,a=["ms","moz","webkit","o"],_=0;_<a.length&&!h;++_)h=window[a[_]+"RequestAnimationFrame"],r=window[a[_]+"CancelAnimationFrame"]||window[a[_]+"CancelRequestAnimationFrame"];r||(r=function(t){window.clearTimeout(t)}),i.prototype={_loopCallback:function(){for(var t=this._runFunc.length;t--;)this._runFunc[t]()===!1&&this._runFunc.splice(t,1);this._runFunc.length?this._timerID=this._requestAnimationFrame.call(window,this._loopCallback):this._active=!1},add:function(t,i){return"function"!=typeof t?this:(i&&(t=e(t,i)),this._runFunc.unshift(t),this._active?this:(this._active=!0,this._isRun&&(this._timerID=this._requestAnimationFrame.call(window,this._loopCallback)),this))},remove:function(t){if("function"!=typeof t)return this._runFunc=[],this;for(var i=this._runFunc.length;i--;)if(this._runFunc[i].guid===t.guid)return this._runFunc.splice(i,1),this},stop:function(){return this._isRun?(this._isRun=!1,r(this._timerID),this):this},play:function(){return this._isRun?this:(this._isRun=!0,this._active&&(this._timerID=this._requestAnimationFrame.call(window,this._loopCallback)),this)}};var u=0,d=document.createElement("div"),c={};c.transform=s("transform"),c.transition=s("transition"),c.transform3d=n(),d=null,o.prototype={_init:function(){this._progress=document.createElement("div"),this._progressHeadLeft=document.createElement("div"),this._progressHeadRight=document.createElement("div"),this._css(this._progress,{display:"none","-webkit-pointer-events":"none","pointer-events":"none","-webkit-user-select":"none","-moz-user-select":"none","user-select":"none",position:"fixed",right:"100%",top:0,"z-index":2147483647,width:"100%",height:"2px",opacity:1}),this._css(this._progressHeadLeft,{position:"absolute",right:"-80px",top:0,width:"180px",height:"100%",opacity:.6,"border-radius":"100%",clip:"rect(-6px,90px,14px,-6px)"}),this._css(this._progressHeadRight,{position:"absolute",right:0,top:0,width:"20px",height:"100%",opacity:.6,"border-radius":"100%",clip:"rect(-6px,22px,14px,10px)"}),this._progress.appendChild(this._progressHeadLeft),this._progress.appendChild(this._progressHeadRight),this._addDocument=e(this._addDocument,this),this._addDocument()},_addDocument:function(){document.body?document.body.appendChild(this._progress):window.setTimeout(this._addDocument)},_loadedHandle:function(){this.done()},_addLoadEvent:function(){this._listenerLoad=!0,window.addEventListener?window.addEventListener("load",this._loadedHandle,!1):window.attachEvent?window.attachEvent("onload",this._loadedHandle):window.onload=this._loadedHandle},_removeLoadEvent:function(){this._listenerLoad=!1,window.removeEventListener?window.removeEventListener("load",this._loadedHandle,!1):window.detachEvent?window.detachEvent("onload",this._loadedHandle):window.onload=null},_run:function(){var t=this._value,i=this._targetValue-t,e=i*this._coe;if(Math.abs(i)>.1)t+=e,this._set(t);else{if(this._set(this._targetValue),this._targetValue!==this._valueStep1)return(this._targetValue===this._valueStep3||this._targetValue===this._valueStep4)&&this._hide(this._targetValue),this._isRun=!1,!1;this._coe=this._coeStep2,this._targetValue=this._valueStep2}},_hide:function(t){if(this._isShow){if(this._isShow=!1,t&&c.transition){this._css(this._progress,c.transition,"opacity "+this._hideDuration+"ms"),this._css(this._progress,"opacity",0);var i=this;this._timerID=window.setTimeout(function(){i._css(i._progress,"display","none"),i._css(i._progress,c.transition,""),i._set(0),i._timerID=0},this._hideDuration)}else this._css(this._progress,"display","none"),this._set(0);return this}},_show:function(){return this._isShow?void 0:(this._isShow=!0,this._timerID>0&&(window.clearTimeout(this._timerID),this._css(this._progress,c.transition,""),this._set(0),this._timerID=0),this._css(this._progress,{display:"block",opacity:1}),this)},_css:function(t,i,e){if("object"==typeof i)for(var s in i)t.style[s]=i[s];else"undefined"!=typeof e&&(t.style[i]=e);return this},_set:function(t){if(this._value=t,c.transform){var i="translate("+t+"%,0)";c.transform3d&&(i+=" translateZ(0)"),this._css(this._progress,c.transform,i)}else this._css(this._progress,"right",100-t+"%");return this},appendTo:function(t,i){return t&&t.appendChild(this._progress),i&&this._css(this._progress,i),this},color:function(t){return this._css(this._progress,"background",t),this._css(this._progressHeadLeft,"box-shadow","1px 0 6px 1px "+t),this._css(this._progressHeadRight,"box-shadow","1px 0 6px 1px "+t),this},set:function(t){return this.stop(),t=Math.max(0,Math.min(100,t)),t<this._valueStep1?(this._coe=this._coeStep1,this._targetValue=this._valueStep1):t<this._valueStep2?(this._coe=this._coeStep2,this._targetValue=this._valueStep2):t<this._valueStep3&&(this._coe=this._coeStep3,this._targetValue=this._valueStep3),this._set(t),t===this._valueStep3||t===this._valueStep4?this._hide(t):this._show(),this},stop:function(){return this._listenerLoad&&this._removeLoadEvent(),this._isRun?(this._isRun=!1,this._loop.remove(this._run),this):this},play:function(){return this._listenerLoad&&this._removeLoadEvent(),this._isRun?this:(this._isRun=!0,this._loop.add(this._run,this),this)},start:function(){return this._set(0),this._coe=this._coeStep1,this._targetValue=this._valueStep1,this._show(),this.play()},done:function(){return this._coe=this._coeStep3,this._targetValue=this._valueStep3,this.play()},fail:function(){return this._coe=this._coeStep4,this._targetValue=this._valueStep4,this.play()}};var l=new o;return l});