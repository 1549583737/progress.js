/*! Pseudo progress v0.9.1 | @author baijunjie | https://github.com/baijunjie/progress.js */
!function(t,i){"use strict";"function"==typeof define&&define.amd?define(i):"object"==typeof exports?module.exports=i():(t.bjj=t.bjj||{},t.bjj.progress=i())}(this,function(){"use strict";function t(t){if(t in u.style)return t;for(var i=t.charAt(0).toUpperCase()+t.substr(1),s=["Webkit","Moz","ms","O"],e=0,n=s.length;n>e;e++){var o=s[e]+i;if(o in u.style)return o}}function i(){return u.style[l.transform]="",u.style[l.transform]="rotateY(90deg)",""!==u.style[l.transform]}function s(){if(this.requestAnimationFrame=o,!this.requestAnimationFrame){var t=0;this.requestAnimationFrame=function(i){var s=(new Date).getTime(),e=Math.max(0,16-(s-t)),n=window.setTimeout(function(){i(s+e)},e);return t=s+e,n}}this.runFunc=[],this.loopRun=!1,this.isStop=!1,this.timerID=0,this._loopCallback=e(this._loopCallback,this)}function e(t,i){if("string"==typeof i){var s=t[i];i=t,t=s}if("function"!=typeof t)return void 0;var e=Array.prototype.slice,n=e.call(arguments,2),o=function(){return t.apply(i||this,n.concat(e.call(arguments)))};return o.guid=t.guid=t.guid||c++,o}function n(t){this.hideDuration=400,this.coeStep1=.05,this.coeStep2=.01,this.coeStep3=.3,this.coeStep4=.1,this.valueStep1=70,this.valueStep2=95,this.valueStep3=100,this.valueStep4=0,this.value=0,this.targetValue=100,this.coe=1,this.isRun=!1,this.isShow=!1,this.timerID=0,this.loop=new s,this._init(),this.color(t||"#2299dd"),this._loadedHandle=e(this._loadedHandle,this),"complete"!==document.readyState&&(this.start(),this._addLoadEvent())}for(var o=window.requestAnimationFrame,r=window.cancelAnimationFrame,h=["ms","moz","webkit","o"],a=0;a<h.length&&!o;++a)o=window[h[a]+"RequestAnimationFrame"],r=window[h[a]+"CancelAnimationFrame"]||window[h[a]+"CancelRequestAnimationFrame"];r||(r=function(t){window.clearTimeout(t)});var u=document.createElement("div"),l={};l.transform=t("transform"),l.transition=t("transition"),l.transform3d=i(),u=null,s.prototype={_loopCallback:function(){for(var t=this.runFunc.length;t--;)this.runFunc[t]()===!1&&this.runFunc.splice(t,1);this.runFunc.length?this.timerID=this.requestAnimationFrame.call(window,this._loopCallback):this.loopRun=!1},add:function(t,i){if("function"!=typeof t)return this;var s=t;return i&&(s=e(t,i)),this.runFunc.unshift(s),this.loopRun?this:(this.loopRun=!0,this.isStop||(this.timerID=this.requestAnimationFrame.call(window,this._loopCallback)),this)},remove:function(t){if("function"!=typeof t)return this;for(var i=this.runFunc.length;i--;)this.runFunc[i].guid===t.guid&&this.runFunc.splice(i,1)},stop:function(){return this.isStop?this:(this.isStop=!0,r(this.timerID),this)},play:function(){return this.isStop?(this.isStop=!1,this.loopRun&&(this.timerID=this.requestAnimationFrame.call(window,this._loopCallback)),this):this}};var c=0;n.prototype={_init:function(){this.progress=document.createElement("div"),this.progressBar=document.createElement("div"),this.progressInner=document.createElement("div"),this._css(this.progress,{display:"none",opacity:1,"-webkit-pointer-events":"none","pointer-events":"none","-webkit-user-select":"none","-moz-user-select":"none","user-select":"none",position:"fixed",top:0,"z-index":99999,width:"100%"}),this._css(this.progressBar,{position:"absolute",right:"100%",width:"100%",height:"2px"}),this._css(this.progressInner,{position:"absolute",right:0,width:"100px",height:"100%"}),l.transform&&this._css(this.progressInner,l.transform,"rotate(3deg) translate(0px, -4px)"),this.progressBar.appendChild(this.progressInner),this.progress.appendChild(this.progressBar),document.body.appendChild(this.progress)},_loadedHandle:function(){this.done(),this._removeLoadEvent()},_addLoadEvent:function(){this.listenerLoad=!0,window.addEventListener?window.addEventListener("load",this._loadedHandle,!1):window.attachEvent?window.attachEvent("onload",this._loadedHandle):window.onload=this._loadedHandle},_removeLoadEvent:function(){this.listenerLoad=!1,window.removeEventListener?window.removeEventListener("load",this._loadedHandle,!1):window.detachEvent?window.detachEvent("onload",this._loadedHandle):window.onload=null},_run:function(){var t=this.value,i=this.targetValue-t,s=i*this.coe;if(Math.abs(i)>.1)t+=s,this._set(t);else{if(this._set(this.targetValue),this.targetValue!==this.valueStep1)return this.isRun=!1,!1;this.coe=this.coeStep2,this.targetValue=this.valueStep2}},_hide:function(t){if(this.isShow){if(this.isShow=!1,t&&l.transition){this._css(this.progress,"opacity",0),this._css(this.progress,l.transition,"opacity "+this.hideDuration+"ms");var i=this;this.timerID=window.setTimeout(function(){i._css(i.progress,"display","none"),i._css(i.progress,l.transition,""),this.timerID=0},this.hideDuration)}else this._css(this.progress,"display","none");return this}},_show:function(){return this.isShow?void 0:(this.isShow=!0,this.timerID>0&&(window.clearTimeout(this.timerID),this._css(this.progress,l.transition,"")),this._css(this.progress,{display:"block",opacity:1}),this)},_css:function(t,i,s){if("object"==typeof i)for(var e in i)t.style[e]=i[e];else"undefined"!=typeof s&&(t.style[i]=s);return this},_set:function(t){if(this.value=t,l.transform){var i="translate("+t+"%,0)";l.transform3d&&(i+=" translateZ(0)"),this._css(this.progressBar,l.transform,i)}else this._css(this.progressBar,"right",100-t+"%");return 0===t||t===this.valueStep3?this._hide(t):this._show(),this},color:function(t){return this._css(this.progressBar,"background",t),this._css(this.progressInner,"box-shadow","0 0 10px "+t+", 0 0 5px "+t),this},set:function(t){return this.stop(),t=Math.max(0,Math.min(100,t)),t<this.valueStep1?(this.coe=this.coeStep1,this.targetValue=this.valueStep1):t<this.valueStep2?(this.coe=this.coeStep2,this.targetValue=this.valueStep2):t<this.valueStep3&&(this.coe=this.coeStep3,this.targetValue=this.valueStep3),this._set(t),this},stop:function(){return this.isRun?(this.isRun=!1,this.loop.remove(this._run),this):this},play:function(){return this.isRun?this:(this.isRun=!0,this.loop.add(this._run,this),this)},start:function(){return this.listenerLoad&&this._removeLoadEvent(),this._set(0),this.coe=this.coeStep1,this.targetValue=this.valueStep1,this.play(),this},done:function(){return this.coe=this.coeStep3,this.targetValue=this.valueStep3,this.play(),this},fail:function(){return this.coe=this.coeStep4,this.targetValue=this.valueStep4,this.play(),this}};var d=new n;return d});